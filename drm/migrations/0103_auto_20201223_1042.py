# -*- coding: utf-8 -*-
# Generated by Django 1.9.12 on 2020-12-23 10:42
from __future__ import unicode_literals

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('djcelery', '0001_initial'),
        ('drm', '0102_fun_if_new_wd'),
    ]

    operations = [
        migrations.CreateModel(
            name='SubSchedule',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('minute', models.CharField(blank=True, default='', max_length=64, verbose_name='分钟')),
                ('hour', models.CharField(blank=True, default='', max_length=64, verbose_name='小时')),
                ('day_of_week', models.CharField(blank=True, default='', max_length=64, verbose_name='周中日')),
                ('day_of_month', models.CharField(blank=True, default='', max_length=64, verbose_name='月中日')),
                ('min_of_hour', models.CharField(blank=True, default='', max_length=64, verbose_name='时中分')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMComponent',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('createtime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('updatetime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('longname', models.TextField(blank=True, null=True, verbose_name='长名称')),
                ('shortname', models.CharField(blank=True, max_length=50, null=True, verbose_name='短名称')),
                ('type', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('owner', models.CharField(blank=True, max_length=20, null=True, verbose_name='所有者')),
                ('icon', models.CharField(blank=True, max_length=256, null=True, verbose_name='图标')),
                ('version', models.CharField(blank=True, max_length=256, null=True, verbose_name='版本')),
                ('attribute', models.TextField(blank=True, null=True, verbose_name='其他属性')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('output', models.TextField(blank=True, null=True, verbose_name='输出参数')),
                ('variable', models.TextField(blank=True, null=True, verbose_name='内部变量')),
                ('remark', models.TextField(blank=True, null=True, verbose_name='说明')),
                ('sort', models.IntegerField(blank=True, null=True, verbose_name='排序')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('language', models.CharField(blank=True, max_length=20, null=True, verbose_name='脚本语言')),
                ('code', models.TextField(blank=True, null=True, verbose_name='脚本代码')),
                ('createuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='component_createuser', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('group', models.ManyToManyField(to='drm.Group')),
                ('pnode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='drm.TSDRMComponent', verbose_name='父节点')),
                ('updateuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='component_updateuser', to=settings.AUTH_USER_MODEL, verbose_name='更新人')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMControl',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('createtime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('updatetime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('longname', models.TextField(blank=True, null=True, verbose_name='长名称')),
                ('shortname', models.CharField(blank=True, max_length=50, null=True, verbose_name='短名称')),
                ('type', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('owner', models.CharField(blank=True, max_length=20, null=True, verbose_name='所有者')),
                ('icon', models.CharField(blank=True, max_length=256, null=True, verbose_name='图标')),
                ('version', models.CharField(blank=True, max_length=256, null=True, verbose_name='版本')),
                ('attribute', models.TextField(blank=True, null=True, verbose_name='其他属性')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('output', models.TextField(blank=True, null=True, verbose_name='输出参数')),
                ('variable', models.TextField(blank=True, null=True, verbose_name='内部变量')),
                ('remark', models.TextField(blank=True, null=True, verbose_name='说明')),
                ('sort', models.IntegerField(blank=True, null=True, verbose_name='排序')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('controlclass', models.TextField(blank=True, null=True, verbose_name='类名')),
                ('createuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='control_createuser', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('group', models.ManyToManyField(to='drm.Group')),
                ('pnode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='drm.TSDRMControl', verbose_name='父节点')),
                ('updateuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='control_updateuser', to=settings.AUTH_USER_MODEL, verbose_name='更新人')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMInstance',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('createtime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('updatetime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('name', models.CharField(blank=True, max_length=200, null=True, verbose_name='名称')),
                ('type', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('instancetype', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型（保护/切换/安装/注册/恢复）')),
                ('loglevel', models.CharField(blank=True, max_length=20, null=True, verbose_name='日志级别')),
                ('monitorable', models.CharField(blank=True, max_length=20, null=True, verbose_name='是否可监控')),
                ('sync', models.CharField(blank=True, max_length=20, null=True, verbose_name='同步/异步')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('remark', models.TextField(blank=True, null=True, verbose_name='说明')),
                ('sort', models.IntegerField(blank=True, null=True, verbose_name='排序')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('createuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='instance_createuser', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('group', models.ManyToManyField(to='drm.Group')),
                ('pnode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='drm.TSDRMInstance', verbose_name='父节点')),
                ('updateuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='instance_updateuser', to=settings.AUTH_USER_MODEL, verbose_name='更新人')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMJob',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('createtime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('updatetime', models.DateTimeField(blank=True, null=True, verbose_name='更新时间')),
                ('starttime', models.DateTimeField(blank=True, null=True, verbose_name='开始时间')),
                ('name', models.CharField(blank=True, max_length=200, null=True, verbose_name='名称')),
                ('reson', models.TextField(blank=True, null=True, verbose_name='启动原因')),
                ('type', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('output', models.TextField(blank=True, null=True, verbose_name='输出参数')),
                ('endtime', models.DateTimeField(blank=True, null=True, verbose_name='结束时间')),
                ('log', models.TextField(blank=True, null=True, verbose_name='日志')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('component', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMComponent', verbose_name='关联组件')),
                ('control', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMControl', verbose_name='关联控件')),
                ('createuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='job_createuser', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('instance', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMInstance', verbose_name='关联实例')),
                ('pjob', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='drm.TSDRMJob', verbose_name='父流程')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMSchedule',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('name', models.CharField(blank=True, max_length=256, null=True, verbose_name='流程计划名称')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('remark', models.TextField(blank=True, null=True, verbose_name='计划说明')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('schedule_type', models.IntegerField(choices=[(1, '每日'), (2, '每周'), (3, '每月'), (4, '每小时')], default=1, null=True)),
                ('dj_periodictask', models.OneToOneField(null=True, on_delete=django.db.models.deletion.CASCADE, to='djcelery.PeriodicTask', verbose_name='定时任务')),
                ('instance', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMInstance', verbose_name='流程预案实例')),
            ],
        ),
        migrations.CreateModel(
            name='TSDRMWorkflow',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('guid', models.CharField(max_length=50, null=True, verbose_name='GUID')),
                ('createtime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('updatetime', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('longname', models.TextField(blank=True, null=True, verbose_name='长名称')),
                ('shortname', models.CharField(blank=True, max_length=50, null=True, verbose_name='短名称')),
                ('type', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('owner', models.CharField(blank=True, max_length=20, null=True, verbose_name='所有者')),
                ('icon', models.CharField(blank=True, max_length=256, null=True, verbose_name='图标')),
                ('version', models.CharField(blank=True, max_length=256, null=True, verbose_name='版本')),
                ('attribute', models.TextField(blank=True, null=True, verbose_name='其他属性')),
                ('input', models.TextField(blank=True, null=True, verbose_name='输入参数')),
                ('output', models.TextField(blank=True, null=True, verbose_name='输出参数')),
                ('variable', models.TextField(blank=True, null=True, verbose_name='内部变量')),
                ('remark', models.TextField(blank=True, null=True, verbose_name='说明')),
                ('sort', models.IntegerField(blank=True, null=True, verbose_name='排序')),
                ('state', models.CharField(blank=True, max_length=20, null=True, verbose_name='状态')),
                ('content', models.TextField(blank=True, null=True, verbose_name='流程内容')),
                ('createuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='workflow_createuser', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('group', models.ManyToManyField(to='drm.Group')),
                ('pnode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='drm.TSDRMWorkflow', verbose_name='父节点')),
                ('updateuser', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='workflow_updateuser', to=settings.AUTH_USER_MODEL, verbose_name='更新人')),
            ],
        ),
        migrations.AddField(
            model_name='tsdrmjob',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMSchedule', verbose_name='关联计划'),
        ),
        migrations.AddField(
            model_name='tsdrmjob',
            name='startuser',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='job_startuser', to=settings.AUTH_USER_MODEL, verbose_name='启动人'),
        ),
        migrations.AddField(
            model_name='tsdrmjob',
            name='updateuser',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='job_updateuser', to=settings.AUTH_USER_MODEL, verbose_name='更新人'),
        ),
        migrations.AddField(
            model_name='tsdrmjob',
            name='workflow',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMWorkflow', verbose_name='关联流程'),
        ),
        migrations.AddField(
            model_name='tsdrminstance',
            name='workflow',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMWorkflow', verbose_name='关联流程'),
        ),
        migrations.AddField(
            model_name='subschedule',
            name='s',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='drm.TSDRMSchedule', verbose_name='周期'),
        ),
    ]
